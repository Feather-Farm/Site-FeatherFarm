<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" type="image/x-icon" href="../assets/assetsIndex/logo.png" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="./style.css" />
  <title>Implementando o chart.js</title>
</head>

<body>
  <main>
    <article id="menuEsquerda">
      <section id="topoMenuEsquerda">
        <img src="../assets/assetsDashboard/logo.png" alt="" />
        <p id="nomeUsuario" name="nomeUsuario"><span id="n_usuario"></span></p>
        <br>
        <p id="nomeUsuario" name="empresa"><span id="n_empresa"></span></p>
        <br>
        <!-- <p id="nomeEmpresa" name="nomeUsuario"></p> -->
        <div>
          <a href="../index.html"><img src="../assets/assetsDashboard/SignOut.png" alt="" /></a>
        </div>
        <!-- <p id="nomeUsuario" name="nomeUsuario">Analista de Dados</p> -->
      </section>
      <section id="opcoesMenu">
        <ul>
          <button id="relatorio">
            <img src="../assets/assetsDashboard/graficIcon.png" id="graficIcon" alt="" /> Relatório
          </button>
          <button id="temperatura">
            <img src="../assets/assetsDashboard/termometro.png" alt="" /> Temperatura
          </button>
          <button id="umidade">
            <img src="../assets/assetsDashboard/umidade.png" alt="" /> Umidade
          </button>
          <button id="suporte">
            <img src="../assets/assetsDashboard/supIcon.png" id="supIcon" alt="" /> Suporte
          </button>
          <button id="btnCadastro" onclick="cadastroNewUser()" >Cadastrar
            Novo Usuário</button>

        </ul>
      </section>
    </article>
    <article id="graficos">
      <div id="referencia">
        <span style="width: 5vw;"><button id="openModalButton"> ? </button></span>

        <p class="verde" ><span id="nome_empresa"><span style="color: black;">Empresa: </span></span></p>

      </div>
      <div id="avatarModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div><img src="../assets/assetsDashboard/quartil.png" alt=""></div>            
        </div>
      </div>
      <section id="areaRelatorio">
        <div class="alerta"></div>
        <article id="graficoRelatorioGeral">
          <section class="graficoRelatorio">
            <h5 class="laranja">
              Gráfico em Linhas de temperatura e umidade - dia 06/06
            </h5>
            <div style="position: relative; height: 40vh; width: 40vw; margin-top: 2vh;">
              <canvas id="myChartLine"></canvas>
            </div>
          </section>
          <!-- <section id="picos">
            <h4>
              Mediana de temperatura:
              <p class="verde" id="picoTemperatura">21.4°C</p>
            </h4>
            <h4>
              Mediana de Umidade:
              <p class="verde" id="picoUmidade">64%</p>
            </h4>
          </section> -->
        </article>
      </section>

      <section id="areaTemperatura" style="display: none">
        <article id="graficoTemperatura">
          <div id="graficoLinhaTemp" style="position: relative; height: 40vh; width: 40vw">
            <h4>Mediana da temperatura nos últimos 7 dias</h4>

            <canvas id="myChartLineTemp"></canvas>
          </div>
          <div>
            <section id="tempIndicador">
              <div>
                <h4>4% mais quente que na semana anterior</h4>
              </div>
              <img src="../assets/assetsDashboard/termometroIndicador.png" alt="" />
            </section>
          </div>
        </article>
      </section>

      <section id="areaUmidade" style="display: none">
        <article id="graficoUmidade">
          <div id="graficoBarraUmidade" style="position: relative; height: 45vh; width: 45vw">
            <h4>Mediana da Umidade nos últimos 7 dias</h4>

            <canvas id="myChartUmidade"></canvas>
          </div>
          <div>
            <section id="umidadeIndicador">
              <div>
                <h4>6% mais úmido que na semana anterior</h4>
              </div>
              <img src="../assets/assetsDashboard/Vector.svg" alt="" />
            </section>
          </div>
        </article>
      </section>

      <section id="areaSuporte" style="display: none">
        <h2 style="margin-top: 2vh;">Precisa de <span class="laranja">Ajuda?</span></h2>

        <article id="conteudoSuporte">

          <article id="esquerdaSuporte">
            <h2 id="duvidas">Dúvidas <span class="verde">Frequentes</span> </h2>

            <div class="faq-container">
              <div class="question"> <!-- Pergunta 1 -->
                <h2>Esqueci minha senha
                </h2>
                <div class="answer">
                  <p>Primeiro clique em "esqueci minha senha"; <br>
                    Digite sue email, enviaremos as instruções ao seu e-mail;<br>
                    ° Localize o e-mail recebido em sua caixa de entrada;<br>
                    ° Digite o código recebido na tela de redefinição de senha;<br>
                    ° Digite sua nova senha, confirme-a, e cadastre-a</p>
                </div>
              </div>

              <div class="question"> <!-- Pergunta 2 -->
                <h2>Dashboard não contém informações.
                </h2>
                <div class="answer">
                  <p>- Reinice a página. <br>
                    - Se o problema persistir faça o logout do site em seguida faça o login novamente<br>                    
                    - Verifique se o arduino está ligado na porta USB. <br>                    
                    - Entre em contato conosco: (11) 9-8712 1244, ou pelo e-mail (featherfarmsuporte@gmail.com)</p>
                </div>
              </div>

              <div class="question"> <!-- Pergunta 3 -->
                <h2>Como atualizo minhas informações de contato no sistema?
                </h2>
                <div class="answer">
                  <p>- Faça login na sua conta utilizando suas credenciais de acesso.
                    - Abra as configurações<br>
                    - Procure pela opção 'Informações de Contato',e clique para abrir essa área<br>
                    - Agora, você pode editar os campos cadastrados<br>
                    - Após fazer as alterações desejadas, certifique-se de salvar as modificações clicando no botão 'Atualizar'.</p>
                </div>
              </div>

              <div class="question"> <!-- Pergunta 4 -->
                <h2>O sistema está apresentando erros ou mensagens de falha. Como posso solucionar esses problemas?</h2>
                <div class="answer">
                  <p>- Limpe o cache e os cookies; <br>
                    - Atualize o sistema e os navegadores;<br>
                    - Entre em contato com nossa equipe de suporte: Se o problema persistir mesmo após seguir as etapas acima, entre em contato com nossa equipe de suporte técnico.</p>
                </div>
              </div>

              <div class="question"> <!-- Pergunta 5 -->
                <h2>As luzes do meu sensor apagaram.
                </h2>
                <div class="answer">
                  <p>Se o equipamento estiver ligado diretamente no computador e está com todas as luzes apagadas, desligue-o do computador e reconecte novamente; <br>
                    Em caso de persistência entre em contato com um dos nossos agentes online.</p>
                </div>
              </div>
            </div>
          </article>

          <article id="contato">
            <h1>Ainda não solucionou sua dúvida?</h1>
            <h2 class="laranja">Fale Conosco!</h2>

            <!-- <div>
              <a href="https:/featherfarmteste-help.freshdesk.com/support/home" target="_blank">
                <button >Entrar em contato</button>
              </a>
              <p style="text-align: center; margin: 5px auto;">OU</p>
            </div> -->

            <!-- area de feecbak -->

            <script type="text/javascript" src="https://s3.amazonaws.com/assets.freshdesk.com/widget/freshwidget.js"></script>
            <style type="text/css" media="screen, projection">
              @import url(https://s3.amazonaws.com/assets.freshdesk.com/widget/freshwidget.css); 
            </style> 
            <iframe title="Feedback Form" class="freshwidget-embedded-form" id="freshwidget-embedded-form" src="https://featherfarmteste-help.freshdesk.com/widgets/feedback_widget/new?&widgetType=embedded" scrolling="no" height="450px" width="70%" frameborder="0" style="margin-left: 13%; background-color: #fffbea; border: solid #E37F2A 1px; padding: 1% 3%; border-radius: 10px;" >
            </iframe>

            <!-- area de suporte -->
            <script>
              window.fwSettings={
              'widget_id':151000003735
              };
              !function(){if("function"!=typeof window.FreshworksWidget){var n=function(){n.q.push(arguments)};n.q=[],window.FreshworksWidget=n}}() 
            </script>
            <script type='text/javascript' src='https://widget.freshworks.com/widgets/151000003735.js' async defer></script>
          </article>

        </article>
      </section>
    </article>
  </main>
</body>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>

  if (sessionStorage.TIPO_USUARIO == 'funcionario') {
    var aparecerBtn = document.getElementById('btn_cadastro')
    aparecerBtn.style.display = 'none'
  }

  n_usuario.innerHTML = sessionStorage.NOME_USUARIO;
  n_empresa.innerHTML = sessionStorage.EMPRESA;
  nome_empresa.innerHTML += sessionStorage.EMPRESA;

  //
  //charts js
  const ctxUmidade = document.getElementById("myChartUmidade");
  const ctxLine = document.getElementById("myChartLine");
  const ctxLineTemp = document.getElementById("myChartLineTemp");


  new Chart(ctxUmidade, {
    type: "line",
    data: {
      labels: ["Ter", "Qua", "Qui", "Sex", "Sab", "Dom", "Seg"],
      datasets: [

        {
          label: "Umidade",
          data: [60, 62, 60, 65, 68, 70, 70],
          backgroundColor: "#135E06",
          borderColor: "#3b8a2d",
          tension: 0.5,
          borderWidth: 2,
        },
      ],
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
        },
      },
    },
  });



  new Chart(ctxLineTemp, {
    type: "line",
    data: {
      labels: ["Ter", "Qua", "Qui", "Sex", "Sab", "Dom", "Seg"],
      datasets: [
        {
          label: "Temperatura",
          data: [22, 22, 23, 23, 24, 22, 20],
          backgroundColor: "#E37F2A",
          borderColor: "#E37F2f",
          fill: false,
          borderWidth: 2,
          tension: 0.5,
        },
      ],
    },
    options: {
      scales: {
        y: {
          beginAtZero: true,
        },
      },
    },
  });

  // modal

  
const openModalButton = document.getElementById('openModalButton');
const modal = document.getElementById('avatarModal');

// Evento de clique para abrir o modal
openModalButton.addEventListener('click', function() {
  modal.style.display = 'block';
});

// Evento de clique fora do modal para fechá-lo
window.addEventListener('click', function(event) {
  if (event.target == modal) {
    modal.style.display = 'none';
  }
});

const userIconImage = document.querySelector('header img');

// Referências às imagens dentro do modal
const modalImages = document.querySelectorAll('.modal-content img');

// Função para trocar a imagem do userIcon.svg
function trocarImagem(e) {
  const selectedImageSrc = e.target.getAttribute('src');
  userIconImage.setAttribute('src', selectedImageSrc);
  modal.style.display = "none";

}

// Adicionando o evento de clique às imagens no modal
modalImages.forEach(function(image) {
  image.addEventListener('click', trocarImagem);

});




  //

  // comandos para trocar os graficos ao clicar nos botoes laterais

  // Selecionar os botões e os painéis de dashboard
  var relatorio = document.getElementById("relatorio");
  var temperatura = document.getElementById("temperatura");
  var umidade = document.getElementById("umidade");
  var suporte = document.getElementById("suporte");

  var areaRelatorio = document.getElementById("areaRelatorio");
  var areaTemperatura = document.getElementById("areaTemperatura");
  var areaUmidade = document.getElementById("areaUmidade");
  var areaSuporte = document.getElementById("areaSuporte");

  // Adicionar um evento de clique a cada botão
  relatorio.addEventListener("click", function () {
    areaRelatorio.style.display = "block";
    areaTemperatura.style.display = "none";
    areaUmidade.style.display = "none";
    areaSuporte.style.display = "none";
    // filtro.style.zIndex = '10';
    referencia.style.zIndex = '10';
    // filtro.style.position = 'relative';
    referencia.style.position = 'relative';

    areaTemperatura.classList.remove("fade");
    areaUmidade.classList.remove("fade");
    areaSuporte.classList.remove("fade");
    areaRelatorio.classList.add("fade");
  });

  temperatura.addEventListener("click", function () {
    areaRelatorio.style.display = "none";
    areaTemperatura.style.display = "block";
    areaUmidade.style.display = "none";
    areaSuporte.style.display = "none";
    // filtro.style.zIndex = '10';
    referencia.style.zIndex = '10';
    // filtro.style.position = 'relative';
    referencia.style.position = 'relative';

    areaRelatorio.classList.remove("fade");
    areaUmidade.classList.remove("fade");
    areaSuporte.classList.remove("fade");
    areaTemperatura.classList.add("fade");
  });

  umidade.addEventListener("click", function () {
    areaRelatorio.style.display = "none";
    areaTemperatura.style.display = "none";
    areaSuporte.style.display = "none";
    areaUmidade.style.display = "block";
    // filtro.style.zIndex = '10';
    referencia.style.zIndex = '10';
    // filtro.style.position = 'relative';
    referencia.style.position = 'relative';

    areaRelatorio.classList.remove("fade");
    areaTemperatura.classList.remove("fade");
    areaSuporte.classList.remove("fade");
    areaUmidade.classList.add("fade");
  });

  suporte.addEventListener("click", function () {

    var filtro = document.getElementById('filtro');
    var referencia = document.getElementById('referencia');

    areaRelatorio.style.display = "none";
    areaTemperatura.style.display = "none";
    areaUmidade.style.display = "none";
    areaSuporte.style.display = "block";
    // filtro.style.zIndex = '-10';
    referencia.style.zIndex = '-10';
    // filtro.style.position = 'absolute';
    referencia.style.position = 'absolute';

    areaRelatorio.classList.remove("fade");
    areaTemperatura.classList.remove("fade");
    areaUmidade.classList.remove("fade");
    areaSuporte.classList.add("fade");
  });

  // area do faq
  const questions = document.querySelectorAll('.question');

questions.forEach(question => {
  question.addEventListener('click', () => {
    const answer = question.querySelector('.answer');
    const allAnswers = document.querySelectorAll('.answer');

    allAnswers.forEach(ans => {
      if (ans !== answer) {
        ans.classList.remove('show');
      }
    });

    answer.classList.toggle('show');
  });
});


  // graficos em chart js

  let proximaAtualizacao;

  window.onload = obterDadosGraficos();

  function obterDadosGraficos() {
    obterDadosGrafico(1)
  }

  // verificar_autenticacao();

  function alterarTitulo(idSensor) {
    var tituloAquario = document.getElementById(`tituloAquario${idSensor}`)
    myChartLine.innerHTML = "Últimas medidas de Temperatura e Umidade do <span style='color: #e6005a'>Aquário " + idSensor + "</span>"
  }

  function exibirAquario(idSensor) {
    let todosOsGraficos = document.getElementById("graficos")

    for (i = 1; i <= todosOsGraficos.childElementCount; i++) {
      // exibindo - ou não - o gráfico
      let elementoAtual = document.getElementById(`grafico${i}`)
      if (elementoAtual.classList.contains("display-block")) {
        elementoAtual.classList.remove("display-block")
      }
      elementoAtual.classList.add("display-none")

      // alterando estilo do botão
      let btnAtual = document.getElementById(`btnAquario${i}`)
      if (btnAtual.classList.contains("btn-pink")) {
        btnAtual.classList.remove("btn-pink")
      }
      btnAtual.classList.add("btn-white")
    }

    // exibindo - ou não - o gráfico
    let graficoExibir = document.getElementById(`grafico${idSensor}`)
    graficoExibir.classList.remove("display-none")
    graficoExibir.classList.add("display-block")

    // alterando estilo do botão
    let btnExibir = document.getElementById(`btnAquario${idSensor}`)
    btnExibir.classList.remove("btn-white")
    btnExibir.classList.add("btn-pink")
  }

  // O gráfico é construído com três funções:
  // 1. obterDadosGrafico -> Traz dados do Banco de Dados para montar o gráfico da primeira vez
  // 2. plotarGrafico -> Monta o gráfico com os dados trazidos e exibe em tela
  // 3. atualizarGrafico -> Atualiza o gráfico, trazendo novamente dados do Banco

  // Esta função *obterDadosGrafico* busca os últimos dados inseridos em tabela de medidas.
  // para, quando carregar o gráfico da primeira vez, já trazer com vários dados.
  // A função *obterDadosGrafico* também invoca a função *plotarGrafico*

  //     Se quiser alterar a busca, ajuste as regras de negócio em src/controllers
  //     Para ajustar o "select", ajuste o comando sql em src/models
  function obterDadosGrafico(idSensor) {

    alterarTitulo(idSensor)

    if (proximaAtualizacao != undefined) {
      clearTimeout(proximaAtualizacao);
    }

    fetch(`/medidas/ultimas/${idSensor}`, { cache: 'no-store' }).then(function (response) {
      if (response.ok) {
        response.json().then(function (resposta) {
          console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
          resposta.reverse();

          plotarGrafico(resposta, idSensor);
          console.log(resposta)
          console.log(resposta)

        });
      } else {
        console.error('Nenhum dado encontrado ou erro na API');
      }
    })
      .catch(function (error) {
        console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
      });
  }

  // Esta função *plotarGrafico* usa os dados capturados na função anterior para criar o gráfico
  // Configura o gráfico (cores, tipo, etc), materializa-o na página e, 
  // A função *plotarGrafico* também invoca a função *atualizarGrafico*
  function plotarGrafico(resposta, idSensor) {

    console.log('iniciando plotagem do gráfico...');

    // Criando estrutura para plotar gráfico - labels
    let labels = [];

    // Criando estrutura para plotar gráfico - dados
    let dados = {
      labels: labels,
      datasets: [{
        label: 'Umidade',
        data: [],
        fill: false,
        backgroundColor: "#39842C",
        borderColor: "#39842C",
        borderWidth: 2,
        tension: 0.6
      },
      {
        label: 'Temperatura',
        data: [],
        fill: false,
        backgroundColor: "#E37F2A",
        borderColor: "#E37F2f",
        tension: 0.5,
        borderWidth: 2,

      }]
    };

    console.log('----------------------------------------------')
    console.log('Estes dados foram recebidos pela funcao "obterDadosGrafico" e passados para "plotarGrafico":')
    console.log(resposta)

    // Inserindo valores recebidos em estrutura para plotar o gráfico
    for (i = 0; i < resposta.length; i++) {
      var registro = resposta[i];
      labels.push(registro.momento_grafico);
      dados.datasets[0].data.push(registro.umidade);
      dados.datasets[1].data.push(registro.temperatura);
    }

    console.log('----------------------------------------------')
    console.log('O gráfico será plotado com os respectivos valores:')
    console.log('Labels:')
    console.log(labels)
    console.log('Dados:')
    console.log(dados.datasets)
    console.log('----------------------------------------------')

    // Criando estrutura para plotar gráfico - config
    const config = {
      type: 'line',
      data: dados,
    };

    // Adicionando gráfico criado em div na tela
    let myChart = new Chart(
      document.getElementById(`myChartLine`),
      config
    );

    setTimeout(() => atualizarGrafico(idSensor, dados, myChart), 2000);
  }


  // Esta função *atualizarGrafico* atualiza o gráfico que foi renderizado na página,
  // buscando a última medida inserida em tabela contendo as capturas, 

  //     Se quiser alterar a busca, ajuste as regras de negócio em src/controllers
  //     Para ajustar o "select", ajuste o comando sql em src/models
  function atualizarGrafico(idSensor, dados, myChart) {



    fetch(`/medidas/tempo-real/${idSensor}`, { cache: 'no-store' }).then(function (response) {
      if (response.ok) {
        response.json().then(function (novoRegistro) {

          console.log(`Dados recebidos: ${JSON.stringify(novoRegistro)}`);
          console.log(`Dados atuais do gráfico:`);
          console.log(dados);
          obterdados(idSensor)

          // let avisoCaptura = document.getElementById(``)
          // avisoCaptura.innerHTML = ""


          if (novoRegistro[0].momento_grafico == dados.labels[dados.labels.length - 1]) {
            console.log("---------------------------------------------------------------")
            console.log("Como não há dados novos para captura, o gráfico não atualizará.")
            // avisoCaptura.innerHTML = "<i class='fa-solid fa-triangle-exclamation'></i> Foi trazido o dado mais atual capturado pelo sensor. <br> Como não há dados novos a exibir, o gráfico não atualizará."
            console.log("Horário do novo dado capturado:")
            console.log(novoRegistro[0].momento_grafico)
            console.log("Horário do último dado capturado:")
            console.log(dados.labels[dados.labels.length - 1])
            console.log("---------------------------------------------------------------")
          } else {
            // tirando e colocando valores no gráfico
            dados.labels.shift(); // apagar o primeiro
            dados.labels.push(novoRegistro[0].momento_grafico); // incluir um novo momento

            dados.datasets[0].data.shift();  // apagar o primeiro de umidade
            dados.datasets[0].data.push(novoRegistro[0].umidade); // incluir uma nova medida de umidade

            dados.datasets[1].data.shift();  // apagar o primeiro de temperatura
            dados.datasets[1].data.push(novoRegistro[0].temperatura); // incluir uma nova medida de temperatura

            myChart.update();
          }

          // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
          proximaAtualizacao = setTimeout(() => atualizarGrafico(idSensor, dados, myChart), 15000);
        });
      } else {
        console.error('Nenhum dado encontrado ou erro na API');
        // Altere aqui o valor em ms se quiser que o gráfico atualize mais rápido ou mais devagar
        proximaAtualizacao = setTimeout(() => atualizarGrafico(idSensor, dados, myChart), 2000);
      }
    })
      .catch(function (error) {
        console.error(`Erro na obtenção dos dados p/ gráfico: ${error.message}`);
      });

  }

  function atualizacaoPeriodica() {
    obterdados(1);
    // function sendData() {
    //     var http = new XMLHttpRequest();
    //     http.open('POST', 'http://localhost:3000/api/sendData', false);
    //     http.send(null);
    // }

    // setInterval(() => {
    //     sendData();
    // }, 2000);

    setTimeout(atualizacaoPeriodica, 15000);
  }

  var alertas = [];

  function obterdados(idSensor) {
    fetch(`/medidas/tempo-real/${idSensor}`)
      .then(resposta => {

        if (resposta.ok) {
          resposta.json().then(resposta => {

            console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
            console.log(resposta)
            console.log("123123")
            alertar(resposta, idSensor)
          });
        } else {

          console.error('Nenhum dado encontrado ou erro na API');
        }
      })
      .catch(function (error) {
        console.error(`Erro na obtenção dos dados do aquario p/ gráfico: ${error.message}`);
      });

  }

  function alertar(resposta, idSensor) {
    console.log("estou na dashboard e fazendo alertas")
    console.log(resposta)
    var temp = resposta[0].temperatura;

    console.log(idSensor === resposta[4].fkSensor)

    var grauDeAviso = '';


    var limites = {
      muito_quente: 23.5,
      quente: 22.5,
      ideal: 21.5,
      frio: 20.5,
      muito_frio: 19.5
    };

    var classe_temperatura = 'cor-alerta';

    if (temp >= limites.muito_quente) {
      classe_temperatura = 'cor-alerta perigo-quente';
      grauDeAviso = 'perigo quente'
      grauDeAvisoCor = 'cor-alerta perigo-quente'
      // exibirAlerta(temp, idSensor, grauDeAviso, grauDeAvisoCor)
      Swal.fire({
        title: 'PERIGO!',
        text: 'Seu galpão está muito quente e suas aves estão em perigo!',
        imageUrl: 'https://gifs.eco.br/wp-content/uploads/2022/08/gifs-de-alerta-vermelho-0.gif',
        imageWidth: 200,
        imageHeight: 100,
        imageAlt: 'Custom image',
        timer: 5000,
        timerProgressBar: true,
        showConfirmButton: false,
        position: 'top-end'
      })
    }
    else if (temp < limites.muito_quente && temp >= limites.quente) {
      classe_temperatura = 'cor-alerta alerta-quente';
      grauDeAviso = 'alerta quente'
      grauDeAvisoCor = 'cor-alerta alerta-quente'
      // exibirAlerta(temp, idSensor, grauDeAviso, grauDeAvisoCor)
      Swal.fire({
        title: 'ALERTA!',
        text: 'Galpão ficando quente demais, é bom ficar de olho',
        imageUrl: 'https://4.bp.blogspot.com/-O5x2ZAdquyk/VzUSHcAiMxI/AAAAAAAAUlc/XXpxbVQrjisq_PiSZMimWohL_ACG-5glACLcB/s320/Gifs%2Banimados%2BSino%2B3.gif',
        imageWidth: 150,
        imageHeight: 100,
        imageAlt: 'Custom image',
        timer: 5000,
        timerProgressBar: true,
        showConfirmButton: false,
        position: 'top-end'
      })
    }
    // else if (temp < limites.quente && temp > limites.frio) {
    //   classe_temperatura = 'cor-alerta ideal';
    //   removerAlerta(idSensor);
    // }
    else if (temp <= limites.frio && temp > limites.muito_frio) {
      classe_temperatura = 'cor-alerta alerta-frio';
      grauDeAviso = 'alerta frio'
      grauDeAvisoCor = 'cor-alerta alerta-frio'
      // exibirAlerta(temp, idSensor, grauDeAviso, grauDeAvisoCor)
      Swal.fire({
        title: 'ALERTA!',
        text: 'Galpão ficando gelado demais, é bom ficar de olho!',
        imageUrl: 'https://4.bp.blogspot.com/-O5x2ZAdquyk/VzUSHcAiMxI/AAAAAAAAUlc/XXpxbVQrjisq_PiSZMimWohL_ACG-5glACLcB/s320/Gifs%2Banimados%2BSino%2B3.gif',
        imageWidth: 150,
        imageHeight: 100,
        imageAlt: 'Custom image',
        timer: 5000,
        timerProgressBar: true,
        showConfirmButton: false,
        position: 'top-end'
      })
    }
    else if (temp <= limites.muito_frio) {
      classe_temperatura = 'cor-alerta perigo-frio';
      grauDeAviso = 'perigo frio'
      grauDeAvisoCor = 'cor-alerta perigo-frio'
      // exibirAlerta(temp, idSensor, grauDeAviso, grauDeAvisoCor)
      Swal.fire({
        title: 'PERIGO!',
        text: 'Seu galpão estã muito frio e suas aves estão em perigo!',
        imageUrl: 'https://gifs.eco.br/wp-content/uploads/2022/08/gifs-de-alerta-vermelho-0.gif',
        imageWidth: 200,
        imageHeight: 100,
        imageAlt: 'Custom image',
        timer: 5000,
        timerProgressBar: true,
        showConfirmButton: false,
        position: 'top-end'
      })
    }


  }

  function cadastroNewUser() {

    Swal.fire({
      position: 'center',
      icon: 'success',
      title: 'Ok, redirecionando!',
      showConfirmButton: false,
      timer: 2000
    })

    setTimeout(() => {
      window.location = "../cadastroNovoUser.html";
    }, "2000")
  }

</script>

</html>